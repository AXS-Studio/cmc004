/*
    json2.js
    2012-10-08

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    See http://www.JSON.org/js.html


    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.


    This file creates a global JSON object containing two methods: stringify
    and parse.

        JSON.stringify(value, replacer, space)
            value       any JavaScript value, usually an object or array.

            replacer    an optional parameter that determines how object
                        values are stringified for objects. It can be a
                        function or an array of strings.

            space       an optional parameter that specifies the indentation
                        of nested structures. If it is omitted, the text will
                        be packed without extra whitespace. If it is a number,
                        it will specify the number of spaces to indent at each
                        level. If it is a string (such as '\t' or '&nbsp;'),
                        it contains the characters used to indent at each level.

            This method produces a JSON text from a JavaScript value.

            When an object value is found, if the object contains a toJSON
            method, its toJSON method will be called and the result will be
            stringified. A toJSON method does not serialize: it returns the
            value represented by the name/value pair that should be serialized,
            or undefined if nothing should be serialized. The toJSON method
            will be passed the key associated with the value, and this will be
            bound to the value

            For example, this would serialize Dates as ISO strings.

                Date.prototype.toJSON = function (key) {
                    function f(n) {
                        // Format integers to have at least two digits.
                        return n < 10 ? '0' + n : n;
                    }

                    return this.getUTCFullYear()   + '-' +
                         f(this.getUTCMonth() + 1) + '-' +
                         f(this.getUTCDate())      + 'T' +
                         f(this.getUTCHours())     + ':' +
                         f(this.getUTCMinutes())   + ':' +
                         f(this.getUTCSeconds())   + 'Z';
                };

            You can provide an optional replacer method. It will be passed the
            key and value of each member, with this bound to the containing
            object. The value that is returned from your method will be
            serialized. If your method returns undefined, then the member will
            be excluded from the serialization.

            If the replacer parameter is an array of strings, then it will be
            used to select the members to be serialized. It filters the results
            such that only members with keys listed in the replacer array are
            stringified.

            Values that do not have JSON representations, such as undefined or
            functions, will not be serialized. Such values in objects will be
            dropped; in arrays they will be replaced with null. You can use
            a replacer function to replace those with JSON values.
            JSON.stringify(undefined) returns undefined.

            The optional space parameter produces a stringification of the
            value that is filled with line breaks and indentation to make it
            easier to read.

            If the space parameter is a non-empty string, then that string will
            be used for indentation. If the space parameter is a number, then
            the indentation will be that many spaces.

            Example:

            text = JSON.stringify(['e', {pluribus: 'unum'}]);
            // text is '["e",{"pluribus":"unum"}]'


            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\t');
            // text is '[\n\t"e",\n\t{\n\t\t"pluribus": "unum"\n\t}\n]'

            text = JSON.stringify([new Date()], function (key, value) {
                return this[key] instanceof Date ?
                    'Date(' + this[key] + ')' : value;
            });
            // text is '["Date(---current time---)"]'


        JSON.parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            // Parse the text. Values that look like ISO date strings will
            // be converted to Date objects.

            myData = JSON.parse(text, function (key, value) {
                var a;
                if (typeof value === 'string') {
                    a =
/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

            myData = JSON.parse('["Date(09/09/2001)"]', function (key, value) {
                var d;
                if (typeof value === 'string' &&
                        value.slice(0, 5) === 'Date(' &&
                        value.slice(-1) === ')') {
                    d = new Date(value.slice(5, -1));
                    if (d) {
                        return d;
                    }
                }
                return value;
            });


    This is a reference implementation. You are free to copy, modify, or
    redistribute.
*//*jslint evil: true, regexp: true *//*members "", "\b", "\t", "\n", "\f", "\r", "\"", JSON, "\\", apply,
    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,
    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,
    lastIndex, length, parse, prototype, push, replace, slice, stringify,
    test, toJSON, toString, valueOf
*/// Create a JSON object only if one does not already exist. We create the
// methods in a closure to avoid creating global variables.
typeof JSON!="object"&&(JSON={});(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e));typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)if(typeof rep[n]=="string"){r=rep[n];i=str(r,a);i&&u.push(quote(r)+(gap?": ":":")+i)}}else for(r in a)if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);i&&u.push(quote(r)+(gap?": ":":")+i)}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")});typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);r!==undefined?i[n]=r:delete i[n]}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})})();(function(e,t){function A(e){if(i==="")return e;e=e.charAt(0).toUpperCase()+e.substr(1);return i+e}var n=Math,r=t.createElement("div").style,i=function(){var e="t,webkitT,MozT,msT,OT".split(","),t,n=0,i=e.length;for(;n<i;n++){t=e[n]+"ransform";if(t in r)return e[n].substr(0,e[n].length-1)}return!1}(),s=i?"-"+i.toLowerCase()+"-":"",o=A("transform"),u=A("transitionProperty"),a=A("transitionDuration"),f=A("transformOrigin"),l=A("transitionTimingFunction"),c=A("transitionDelay"),h=/android/gi.test(navigator.appVersion),p=/iphone|ipad/gi.test(navigator.appVersion),d=/hp-tablet/gi.test(navigator.appVersion),v=A("perspective")in r,m="ontouchstart"in e&&!d,g=i!==!1,y=A("transition")in r,b="onorientationchange"in e?"orientationchange":"resize",w=m?"touchstart":"mousedown",E=m?"touchmove":"mousemove",S=m?"touchend":"mouseup",x=m?"touchcancel":"mouseup",T=function(){if(i===!1)return!1;var e={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return e[i]}(),N=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),C=function(){return e.cancelRequestAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}(),k=v?" translateZ(0)":"",L=function(n,r){var i=this,c;i.wrapper=typeof n=="object"?n:t.getElementById(n);i.wrapper.style.overflow="hidden";i.scroller=i.wrapper.children[0];i.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:h,hideScrollbar:p,fadeScrollbar:p&&v,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(c in r)i.options[c]=r[c];i.x=i.options.x;i.y=i.options.y;i.options.useTransform=g&&i.options.useTransform;i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar;i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar;i.options.zoom=i.options.useTransform&&i.options.zoom;i.options.useTransition=y&&i.options.useTransition;i.options.zoom&&h&&(k="");i.scroller.style[u]=i.options.useTransform?s+"transform":"top left";i.scroller.style[a]="0";i.scroller.style[f]="0 0";i.options.useTransition&&(i.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)");i.options.useTransform?i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px)"+k:i.scroller.style.cssText+=";position:absolute;top:"+i.y+"px;left:"+i.x+"px";i.options.useTransition&&(i.options.fixedScrollbar=!0);i.refresh();i._bind(b,e);i._bind(w);if(!m&&i.options.wheelAction!="none"){i._bind("DOMMouseScroll");i._bind("mousewheel")}i.options.checkDOMChanges&&(i.checkDOMTime=setInterval(function(){i._checkDOMChanges()},500))};L.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case w:if(!m&&e.button!==0)return;t._start(e);break;case E:t._move(e);break;case S:case x:t._end(e);break;case b:t._resize();break;case"DOMMouseScroll":case"mousewheel":t._wheel(e);break;case T:t._transitionEnd(e)}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(e){var r=this,i;if(!r[e+"Scrollbar"]){if(r[e+"ScrollbarWrapper"]){g&&(r[e+"ScrollbarIndicator"].style[o]="");r[e+"ScrollbarWrapper"].parentNode.removeChild(r[e+"ScrollbarWrapper"]);r[e+"ScrollbarWrapper"]=null;r[e+"ScrollbarIndicator"]=null}return}if(!r[e+"ScrollbarWrapper"]){i=t.createElement("div");r.options.scrollbarClass?i.className=r.options.scrollbarClass+e.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+(e=="h"?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px");i.style.cssText+=";pointer-events:none;"+s+"transition-property:opacity;"+s+"transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1");r.wrapper.appendChild(i);r[e+"ScrollbarWrapper"]=i;i=t.createElement("div");r.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+s+"background-clip:padding-box;"+s+"box-sizing:border-box;"+(e=="h"?"height:100%":"width:100%")+";"+s+"border-radius:3px;border-radius:3px");i.style.cssText+=";pointer-events:none;"+s+"transition-property:"+s+"transform;"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+s+"transition-duration:0;"+s+"transform: translate(0,0)"+k;r.options.useTransition&&(i.style.cssText+=";"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)");r[e+"ScrollbarWrapper"].appendChild(i);r[e+"ScrollbarIndicator"]=i}if(e=="h"){r.hScrollbarSize=r.hScrollbarWrapper.clientWidth;r.hScrollbarIndicatorSize=n.max(n.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8);r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px";r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize;r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX}else{r.vScrollbarSize=r.vScrollbarWrapper.clientHeight;r.vScrollbarIndicatorSize=n.max(n.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8);r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px";r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize;r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY}r._scrollbarPos(e,!0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},h?200:0)},_pos:function(e,t){if(this.zoomed)return;e=this.hScroll?e:0;t=this.vScroll?t:0;if(this.options.useTransform)this.scroller.style[o]="translate("+e+"px,"+t+"px) scale("+this.scale+")"+k;else{e=n.round(e);t=n.round(t);this.scroller.style.left=e+"px";this.scroller.style.top=t+"px"}this.x=e;this.y=t;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(e,t){var r=this,i=e=="h"?r.x:r.y,s;if(!r[e+"Scrollbar"])return;i=r[e+"ScrollbarProp"]*i;if(i<0){if(!r.options.fixedScrollbar){s=r[e+"ScrollbarIndicatorSize"]+n.round(i*3);s<8&&(s=8);r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px"}i=0}else if(i>r[e+"ScrollbarMaxScroll"])if(!r.options.fixedScrollbar){s=r[e+"ScrollbarIndicatorSize"]-n.round((i-r[e+"ScrollbarMaxScroll"])*3);s<8&&(s=8);r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px";i=r[e+"ScrollbarMaxScroll"]+(r[e+"ScrollbarIndicatorSize"]-s)}else i=r[e+"ScrollbarMaxScroll"];r[e+"ScrollbarWrapper"].style[c]="0";r[e+"ScrollbarWrapper"].style.opacity=t&&r.options.hideScrollbar?"0":"1";r[e+"ScrollbarIndicator"].style[o]="translate("+(e=="h"?i+"px,0)":"0,"+i+"px)")+k},_start:function(t){var r=this,i=m?t.touches[0]:t,s,u,a,f,l;if(!r.enabled)return;r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,t);(r.options.useTransition||r.options.zoom)&&r._transitionTime(0);r.moved=!1;r.animating=!1;r.zoomed=!1;r.distX=0;r.distY=0;r.absDistX=0;r.absDistY=0;r.dirX=0;r.dirY=0;if(r.options.zoom&&m&&t.touches.length>1){f=n.abs(t.touches[0].pageX-t.touches[1].pageX);l=n.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDistStart=n.sqrt(f*f+l*l);r.originX=n.abs(t.touches[0].pageX+t.touches[1].pageX-r.wrapperOffsetLeft*2)/2-r.x;r.originY=n.abs(t.touches[0].pageY+t.touches[1].pageY-r.wrapperOffsetTop*2)/2-r.y;r.options.onZoomStart&&r.options.onZoomStart.call(r,t)}if(r.options.momentum){if(r.options.useTransform){s=getComputedStyle(r.scroller,null)[o].replace(/[^0-9\-.,]/g,"").split(",");u=+(s[12]||s[4]);a=+(s[13]||s[5])}else{u=+getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,"");a=+getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")}if(u!=r.x||a!=r.y){r.options.useTransition?r._unbind(T):C(r.aniTime);r.steps=[];r._pos(u,a);r.options.onScrollEnd&&r.options.onScrollEnd.call(r)}}r.absStartX=r.x;r.absStartY=r.y;r.startX=r.x;r.startY=r.y;r.pointX=i.pageX;r.pointY=i.pageY;r.startTime=t.timeStamp||Date.now();r.options.onScrollStart&&r.options.onScrollStart.call(r,t);r._bind(E,e);r._bind(S,e);r._bind(x,e)},_move:function(e){var t=this,r=m?e.touches[0]:e,i=r.pageX-t.pointX,s=r.pageY-t.pointY,u=t.x+i,a=t.y+s,f,l,c,h=e.timeStamp||Date.now();t.options.onBeforeScrollMove&&t.options.onBeforeScrollMove.call(t,e);if(t.options.zoom&&m&&e.touches.length>1){f=n.abs(e.touches[0].pageX-e.touches[1].pageX);l=n.abs(e.touches[0].pageY-e.touches[1].pageY);t.touchesDist=n.sqrt(f*f+l*l);t.zoomed=!0;c=1/t.touchesDistStart*t.touchesDist*this.scale;c<t.options.zoomMin?c=.5*t.options.zoomMin*Math.pow(2,c/t.options.zoomMin):c>t.options.zoomMax&&(c=2*t.options.zoomMax*Math.pow(.5,t.options.zoomMax/c));t.lastScale=c/this.scale;u=this.originX-this.originX*t.lastScale+this.x,a=this.originY-this.originY*t.lastScale+this.y;this.scroller.style[o]="translate("+u+"px,"+a+"px) scale("+c+")"+k;t.options.onZoom&&t.options.onZoom.call(t,e);return}t.pointX=r.pageX;t.pointY=r.pageY;if(u>0||u<t.maxScrollX)u=t.options.bounce?t.x+i/2:u>=0||t.maxScrollX>=0?0:t.maxScrollX;if(a>t.minScrollY||a<t.maxScrollY)a=t.options.bounce?t.y+s/2:a>=t.minScrollY||t.maxScrollY>=0?t.minScrollY:t.maxScrollY;t.distX+=i;t.distY+=s;t.absDistX=n.abs(t.distX);t.absDistY=n.abs(t.distY);if(t.absDistX<6&&t.absDistY<6)return;if(t.options.lockDirection)if(t.absDistX>t.absDistY+5){a=t.y;s=0}else if(t.absDistY>t.absDistX+5){u=t.x;i=0}t.moved=!0;t._pos(u,a);t.dirX=i>0?-1:i<0?1:0;t.dirY=s>0?-1:s<0?1:0;if(h-t.startTime>300){t.startTime=h;t.startX=t.x;t.startY=t.y}t.options.onScrollMove&&t.options.onScrollMove.call(t,e)},_end:function(r){if(m&&r.touches.length!==0)return;var i=this,s=m?r.changedTouches[0]:r,u,f,l={dist:0,time:0},c={dist:0,time:0},h=(r.timeStamp||Date.now())-i.startTime,p=i.x,d=i.y,v,g,y,b,w;i._unbind(E,e);i._unbind(S,e);i._unbind(x,e);i.options.onBeforeScrollEnd&&i.options.onBeforeScrollEnd.call(i,r);if(i.zoomed){w=i.scale*i.lastScale;w=Math.max(i.options.zoomMin,w);w=Math.min(i.options.zoomMax,w);i.lastScale=w/i.scale;i.scale=w;i.x=i.originX-i.originX*i.lastScale+i.x;i.y=i.originY-i.originY*i.lastScale+i.y;i.scroller.style[a]="200ms";i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+i.scale+")"+k;i.zoomed=!1;i.refresh();i.options.onZoomEnd&&i.options.onZoomEnd.call(i,r);return}if(!i.moved){if(m)if(i.doubleTapTimer&&i.options.zoom){clearTimeout(i.doubleTapTimer);i.doubleTapTimer=null;i.options.onZoomStart&&i.options.onZoomStart.call(i,r);i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1);i.options.onZoomEnd&&setTimeout(function(){i.options.onZoomEnd.call(i,r)},200)}else this.options.handleClick&&(i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null;u=s.target;while(u.nodeType!=1)u=u.parentNode;if(u.tagName!="SELECT"&&u.tagName!="INPUT"&&u.tagName!="TEXTAREA"){f=t.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,r.view,1,s.screenX,s.screenY,s.clientX,s.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null);f._fake=!0;u.dispatchEvent(f)}},i.options.zoom?250:0));i._resetPos(400);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(h<300&&i.options.momentum){l=p?i._momentum(p-i.startX,h,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):l;c=d?i._momentum(d-i.startY,h,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):c;p=i.x+l.dist;d=i.y+c.dist;if(i.x>0&&p>0||i.x<i.maxScrollX&&p<i.maxScrollX)l={dist:0,time:0};if(i.y>i.minScrollY&&d>i.minScrollY||i.y<i.maxScrollY&&d<i.maxScrollY)c={dist:0,time:0}}if(l.dist||c.dist){y=n.max(n.max(l.time,c.time),10);if(i.options.snap){v=p-i.absStartX;g=d-i.absStartY;if(n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{b=i._snap(p,d);p=b.x;d=b.y;y=n.max(b.time,y)}}i.scrollTo(n.round(p),n.round(d),y);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(i.options.snap){v=p-i.absStartX;g=d-i.absStartY;if(n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{b=i._snap(i.x,i.y);(b.x!=i.x||b.y!=i.y)&&i.scrollTo(b.x,b.y,b.time)}i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}i._resetPos(200);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r)},_resetPos:function(e){var t=this,n=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,r=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(n==t.x&&r==t.y){if(t.moved){t.moved=!1;t.options.onScrollEnd&&t.options.onScrollEnd.call(t)}if(t.hScrollbar&&t.options.hideScrollbar){i=="webkit"&&(t.hScrollbarWrapper.style[c]="300ms");t.hScrollbarWrapper.style.opacity="0"}if(t.vScrollbar&&t.options.hideScrollbar){i=="webkit"&&(t.vScrollbarWrapper.style[c]="300ms");t.vScrollbarWrapper.style.opacity="0"}return}t.scrollTo(n,r,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e){n=e.wheelDeltaX/12;r=e.wheelDeltaY/12}else if("wheelDelta"in e)n=r=e.wheelDelta/12;else{if(!("detail"in e))return;n=r=-e.detail*3}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0));o<t.options.zoomMin&&(o=t.options.zoomMin);o>t.options.zoomMax&&(o=t.options.zoomMax);if(o!=t.scale){!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,e);t.wheelZoomCount++;t.zoom(e.pageX,e.pageY,o,400);setTimeout(function(){t.wheelZoomCount--;!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,e)},400)}return}i=t.x+n;s=t.y+r;i>0?i=0:i<t.maxScrollX&&(i=t.maxScrollX);s>t.minScrollY?s=t.minScrollY:s<t.maxScrollY&&(s=t.maxScrollY);t.maxScrollY<0&&t.scrollTo(i,s,0)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind(T);t._startAni()},_startAni:function(){var e=this,t=e.x,r=e.y,i=Date.now(),s,o,u;if(e.animating)return;if(!e.steps.length){e._resetPos(400);return}s=e.steps.shift();s.x==t&&s.y==r&&(s.time=0);e.animating=!0;e.moved=!0;if(e.options.useTransition){e._transitionTime(s.time);e._pos(s.x,s.y);e.animating=!1;s.time?e._bind(T):e._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){e._pos(s.x,s.y);e.animating=!1;e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e);e._startAni();return}a=(a-i)/s.time-1;o=n.sqrt(1-a*a);f=(s.x-t)*o+t;l=(s.y-r)*o+r;e._pos(f,l);e.animating&&(e.aniTime=N(u))};u()},_transitionTime:function(e){e+="ms";this.scroller.style[a]=e;this.hScrollbar&&(this.hScrollbarIndicator.style[a]=e);this.vScrollbar&&(this.vScrollbarIndicator.style[a]=e)},_momentum:function(e,t,r,i,s){var o=6e-4,u=n.abs(e)/t,a=u*u/(2*o),f=0,l=0;if(e>0&&a>r){l=s/(6/(a/u*o));r+=l;u=u*r/a;a=r}else if(e<0&&a>i){l=s/(6/(a/u*o));i+=l;u=u*i/a;a=i}a*=e<0?-1:1;f=u/o;return{dist:a,time:n.round(f)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}if(e!=this.wrapper){t*=this.scale;n*=this.scale}return{left:t,top:n}},_snap:function(e,t){var r=this,i,s,o,u,a,f;o=r.pagesX.length-1;for(i=0,s=r.pagesX.length;i<s;i++)if(e>=r.pagesX[i]){o=i;break}o==r.currPageX&&o>0&&r.dirX<0&&o--;e=r.pagesX[o];a=n.abs(e-r.pagesX[r.currPageX]);a=a?n.abs(r.x-e)/a*500:0;r.currPageX=o;o=r.pagesY.length-1;for(i=0;i<o;i++)if(t>=r.pagesY[i]){o=i;break}o==r.currPageY&&o>0&&r.dirY<0&&o--;t=r.pagesY[o];f=n.abs(t-r.pagesY[r.currPageY]);f=f?n.abs(r.y-t)/f*500:0;r.currPageY=o;u=n.round(n.max(a,f))||200;return{x:e,y:t,time:u}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var t=this;t.scroller.style[o]="";t.hScrollbar=!1;t.vScrollbar=!1;t._scrollbar("h");t._scrollbar("v");t._unbind(b,e);t._unbind(w);t._unbind(E,e);t._unbind(S,e);t._unbind(x,e);if(!t.options.hasTouch){t._unbind("DOMMouseScroll");t._unbind("mousewheel")}t.options.useTransition&&t._unbind(T);t.options.checkDOMChanges&&clearInterval(t.checkDOMTime);t.options.onDestroy&&t.options.onDestroy.call(t)},refresh:function(){var e=this,t,r,i,s,o=0,u=0;e.scale<e.options.zoomMin&&(e.scale=e.options.zoomMin);e.wrapperW=e.wrapper.clientWidth||1;e.wrapperH=e.wrapper.clientHeight||1;e.minScrollY=-e.options.topOffset||0;e.scrollerW=n.round(e.scroller.offsetWidth*e.scale);e.scrollerH=n.round((e.scroller.offsetHeight+e.minScrollY)*e.scale);e.maxScrollX=e.wrapperW-e.scrollerW;e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY;e.dirX=0;e.dirY=0;e.options.onRefresh&&e.options.onRefresh.call(e);e.hScroll=e.options.hScroll&&e.maxScrollX<0;e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH);e.hScrollbar=e.hScroll&&e.options.hScrollbar;e.vScrollbar=e.vScroll&&e.options.vScrollbar&&e.scrollerH>e.wrapperH;t=e._offset(e.wrapper);e.wrapperOffsetLeft=-t.left;e.wrapperOffsetTop=-t.top;if(typeof e.options.snap=="string"){e.pagesX=[];e.pagesY=[];s=e.scroller.querySelectorAll(e.options.snap);for(r=0,i=s.length;r<i;r++){o=e._offset(s[r]);o.left+=e.wrapperOffsetLeft;o.top+=e.wrapperOffsetTop;e.pagesX[r]=o.left<e.maxScrollX?e.maxScrollX:o.left*e.scale;e.pagesY[r]=o.top<e.maxScrollY?e.maxScrollY:o.top*e.scale}}else if(e.options.snap){e.pagesX=[];while(o>=e.maxScrollX){e.pagesX[u]=o;o-=e.wrapperW;u++}e.maxScrollX%e.wrapperW&&(e.pagesX[e.pagesX.length]=e.maxScrollX-e.pagesX[e.pagesX.length-1]+e.pagesX[e.pagesX.length-1]);o=0;u=0;e.pagesY=[];while(o>=e.maxScrollY){e.pagesY[u]=o;o-=e.wrapperH;u++}e.maxScrollY%e.wrapperH&&(e.pagesY[e.pagesY.length]=e.maxScrollY-e.pagesY[e.pagesY.length-1]+e.pagesY[e.pagesY.length-1])}e._scrollbar("h");e._scrollbar("v");if(!e.zoomed){e.scroller.style[a]="0";e._resetPos(400)}},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop();s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++){if(s[o].relative){s[o].x=i.x-s[o].x;s[o].y=i.y-s[o].y}i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0})}i._startAni()},scrollToElement:function(e,t){var r=this,i;e=e.nodeType?e:r.scroller.querySelector(e);if(!e)return;i=r._offset(e);i.left+=r.wrapperOffsetLeft;i.top+=r.wrapperOffsetTop;i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left;i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top;t=t===undefined?n.max(n.abs(i.left)*2,n.abs(i.top)*2):t;r.scrollTo(i.left,i.top,t)},scrollToPage:function(e,t,n){var r=this,i,s;n=n===undefined?400:n;r.options.onScrollStart&&r.options.onScrollStart.call(r);if(r.options.snap){e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e;t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t;e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e;t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t;r.currPageX=e;r.currPageY=t;i=r.pagesX[e];s=r.pagesY[t]}else{i=-r.wrapperW*e;s=-r.wrapperH*t;i<r.maxScrollX&&(i=r.maxScrollX);s<r.maxScrollY&&(s=r.maxScrollY)}r.scrollTo(i,s,n)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(E,e);this._unbind(S,e);this._unbind(x,e)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(T):C(this.aniTime);this.steps=[];this.moved=!1;this.animating=!1},zoom:function(e,t,n,r){var i=this,s=n/i.scale;if(!i.options.useTransform)return;i.zoomed=!0;r=r===undefined?200:r;e=e-i.wrapperOffsetLeft-i.x;t=t-i.wrapperOffsetTop-i.y;i.x=e-e*s+i.x;i.y=t-t*s+i.y;i.scale=n;i.refresh();i.x=i.x>0?0:i.x<i.maxScrollX?i.maxScrollX:i.x;i.y=i.y>i.minScrollY?i.minScrollY:i.y<i.maxScrollY?i.maxScrollY:i.y;i.scroller.style[a]=r+"ms";i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+n+")"+k;i.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};r=null;typeof exports!="undefined"?exports.iScroll=L:e.iScroll=L})(window,document);(function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(this===void 0||this===null)throw new TypeError;var n=Object(this),r=n.length>>>0,i=0,s;if(typeof t!="function")throw new TypeError;if(r==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)s=arguments[1];else do{if(i in n){s=n[i++];break}if(++i>=r)throw new TypeError}while(!0);while(i<r){i in n&&(s=t.call(e,s,n[i],i,n));i++}return s})})();var Zepto=function(){function O(e){return e==null?String(e):T[N.call(e)]||"object"}function M(e){return O(e)=="function"}function _(e){return e!=null&&e==e.window}function D(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function P(e){return O(e)=="object"}function H(e){return P(e)&&!_(e)&&e.__proto__==Object.prototype}function B(e){return e instanceof Array}function j(e){return typeof e.length=="number"}function F(e){return o.call(e,function(e){return e!=null})}function I(e){return e.length>0?n.fn.concat.apply([],e):e}function q(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function R(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function U(e,t){return typeof t=="number"&&!c[q(e)]?t+"px":t}function z(e){var t,n;if(!a[e]){t=u.createElement(e);u.body.appendChild(t);n=l(t,"").getPropertyValue("display");t.parentNode.removeChild(t);n=="none"&&(n="block");a[e]=n}return a[e]}function W(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function X(n,r,i){for(t in r)if(i&&(H(r[t])||B(r[t]))){H(r[t])&&!H(n[t])&&(n[t]={});B(r[t])&&!B(n[t])&&(n[t]=[]);X(n[t],r[t],i)}else r[t]!==e&&(n[t]=r[t])}function V(t,r){return r===e?n(t):n(t).filter(r)}function $(e,t,n,r){return M(t)?t.call(e,n,r):t}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Q(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?n.parseJSON(e):e:t):e}catch(r){return e}}function G(e,t){t(e);for(var n in e.childNodes)G(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l=u.defaultView.getComputedStyle,c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=["val","css","html","text","data","width","height","offset"],m=["after","prepend","before","append"],g=u.createElement("table"),y=u.createElement("tr"),b={tr:u.createElement("tbody"),tbody:g,thead:g,tfoot:g,td:y,th:y,"*":u.createElement("div")},w=/complete|loaded|interactive/,E=/^\.([\w-]+)$/,S=/^#([\w-]*)$/,x=/^[\w-]+$/,T={},N=T.toString,C={},k,L,A=u.createElement("div");C.matches=function(e,t){if(!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;s&&(i=A).appendChild(e);r=~C.qsa(i,t).indexOf
(e);s&&A.removeChild(e);return r};k=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})};L=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})};C.fragment=function(t,r,i){t.replace&&(t=t.replace(p,"<$1></$2>"));r===e&&(r=h.test(t)&&RegExp.$1);r in b||(r="*");var o,u,a=b[r];a.innerHTML=""+t;u=n.each(s.call(a.childNodes),function(){a.removeChild(this)});if(H(i)){o=n(u);n.each(i,function(e,t){v.indexOf(e)>-1?o[e](t):o.attr(e,t)})}return u};C.Z=function(e,t){e=e||[];e.__proto__=n.fn;e.selector=t||"";return e};C.isZ=function(e){return e instanceof C.Z};C.init=function(t,r){if(!t)return C.Z();if(M(t))return n(u).ready(t);if(C.isZ(t))return t;var i;if(B(t))i=F(t);else if(P(t))i=[H(t)?n.extend({},t):t],t=null;else if(h.test(t))i=C.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=C.qsa(u,t)}return C.Z(i,t)};n=function(e,t){return C.init(e,t)};n.extend=function(e){var t,n=s.call(arguments,1);if(typeof e=="boolean"){t=e;e=n.shift()}n.forEach(function(n){X(e,n,t)});return e};C.qsa=function(e,t){var n;return D(e)&&S.test(t)?(n=e.getElementById(RegExp.$1))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(E.test(t)?e.getElementsByClassName(RegExp.$1):x.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))};n.contains=function(e,t){return e!==t&&e.contains(t)};n.type=O;n.isFunction=M;n.isWindow=_;n.isArray=B;n.isPlainObject=H;n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0};n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)};n.camelCase=k;n.trim=function(e){return e.trim()};n.uuid=0;n.support={};n.expr={};n.map=function(e,t){var n,r=[],i,s;if(j(e))for(i=0;i<e.length;i++){n=t(e[i],i);n!=null&&r.push(n)}else for(s in e){n=t(e[s],s);n!=null&&r.push(n)}return I(r)};n.each=function(e,t){var n,r;if(j(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e};n.grep=function(e,t){return o.call(e,t)};window.JSON&&(n.parseJSON=JSON.parse);n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){T["[object "+t+"]"]=t.toLowerCase()});n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){w.test(u.readyState)?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1);return this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){i.every.call(this,function(t,n){return e.call(t,n,t)!==!1});return this},filter:function(e){return M(e)?this.not(this.not(e)):n(o.call(this,function(t){return C.matches(t,e)}))},add:function(e,t){return n(L(this.concat(n(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var r=[];if(M(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):j(t)&&M(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return P(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!P(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!P(e)?e:n(e)},find:function(e){var t,r=this;typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(C.qsa(this[0],e)):t=this.map(function(){return C.qsa(this,e)});return t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:C.matches(r,e)))r=r!==t&&!D(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!D(e)&&t.indexOf(e)<0){t.push(e);return e}});return V(t,e)},parent:function(e){return V(L(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null);l(this,"").getPropertyValue("display")=="none"&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=M(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=M(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){this.parent().each(function(){n(this).replaceWith(n(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(t){return t===e?this.length>0?this[0].innerHTML:null:this.each(function(e){var r=this.innerHTML;n(this).empty().append($(this,t,e,r))})},text:function(t){return t===e?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(P(n))for(t in n)J(this,t,n[t]);else J(this,n,$(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&J(this,e)})},prop:function(t,n){return n===e?this[0]&&this[0][t]:this.each(function(e){this[t]=$(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+q(t),n);return r!==null?Q(r):e},val:function(t){return t===e?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(e){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=$(this,t,e,this.value)})},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=$(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative");r.css(o)});if(this.length==0)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,n){if(arguments.length<2&&typeof e=="string")return this[0]&&(this[0].style[k(e)]||l(this[0],"").getPropertyValue(e));var r="";if(O(e)=="string")!n&&n!==0?this.each(function(){this.style.removeProperty(q(e))}):r=q(e)+":"+U(e,n);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(q(t))}):r+=q(t)+":"+U(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return i.some.call(this,function(e){return this.test(K(e))},R(e))},addClass:function(e){return this.each(function(t){r=[];var i=K(this),s=$(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this);r.length&&K(this,i+(i?" ":"")+r.join(" "))})},removeClass:function(t){return this.each(function(n){if(t===e)return K(this,"");r=K(this);$(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(R(e)," ")});K(this,r.trim())})},toggleClass:function(t,r){return this.each(function(i){var s=n(this),o=$(this,t,i,K(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})})},scrollTop:function(){if(!this.length)return;return"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();r.top-=parseFloat(n(e).css("margin-top"))||0;r.left-=parseFloat(n(e).css("margin-left"))||0;i.top+=parseFloat(n(t[0]).css("border-top-width"))||0;i.left+=parseFloat(n(t[0]).css("border-left-width"))||0;return{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}};n.fn.detach=n.fn.remove;["width","height"].forEach(function(t){n.fn[t]=function(r){var i,s=this[0],o=t.replace(/./,function(e){return e[0].toUpperCase()});return r===e?_(s)?s["inner"+o]:D(s)?s.documentElement["offset"+o]:(i=this.offset())&&i[t]:this.each(function(e){s=n(this);s.css(t,$(this,r,e,s[t]()))})}});m.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){e=O(t);return e=="object"||e=="array"||t==null?t:C.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,u){s=r?u:u.parentNode;u=t==0?u.nextSibling:t==1?u.firstChild:t==2?u:null;i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();G(s.insertBefore(e,u),function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})};n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){n(t)[e](this);return this}});C.Z.prototype=n.fn;C.uniq=L;C.deserializeValue=Q;n.zepto=C;return n}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);(function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)\s+([\d.]+)/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),a=u&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),l=e.match(/Silk\/([\d._]+)/),c=e.match(/(BlackBerry).*Version\/([\d.]+)/),h=e.match(/(BB10).*Version\/([\d.]+)/),p=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),d=e.match(/PlayBook/),v=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/);if(n.webkit=!!r)n.version=r[1];i&&(t.android=!0,t.version=i[2]);o&&(t.ios=t.iphone=!0,t.version=o[2].replace(/_/g,"."));s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,"."));u&&(t.webos=!0,t.version=u[2]);a&&(t.touchpad=!0);c&&(t.blackberry=!0,t.version=c[2]);h&&(t.bb10=!0,t.version=h[2]);p&&(t.rimtabletos=!0,t.version=p[2]);d&&(n.playbook=!0);f&&(t.kindle=!0,t.version=f[1]);l&&(n.silk=!0,n.version=l[1]);!l&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0);v&&(n.chrome=!0,n.version=v[1]);m&&(n.firefox=!0,n.version=m[1]);t.tablet=!!(s||d||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/));t.phone=!t.tablet&&!!(i||o||u||c||h||v&&e.match(/Android/)||v&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/))}t.call(e,navigator.userAgent);e.__detect=t})(Zepto);(function(e){function o(e){return e._zid||(e._zid=r++)}function u(e,t,r,i){t=a(t);if(t.ns)var s=f(t.ns);return(n[o(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||s.test(e.ns))&&(!r||o(e.fn)===o(r))&&(!i||e.sel==i)})}function a(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function f(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function l(t,n,r){e.type(t)!="string"?e.each(t,r):t.split(/\s/).forEach(function(e){r(e,n)})}function c(e,t){return e.del&&(e.e=="focus"||e.e=="blur")||!!t}function h(e){return s[e]||e}function p(t,r,i,u,f,p){var d=o(t),v=n[d]||(n[d]=[]);l(r,i,function(n,r){var i=a(n);i.fn=r;i.sel=u;i.e in s&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return i.fn.apply(this,arguments)});i.del=f&&f(r,n);var o=i.del||r;i.proxy=function(e){var n=o.apply(t,[e].concat(e.data));n===!1&&(e.preventDefault(),e.stopPropagation());return n};i.i=v.length;v.push(i);t.addEventListener(h(i.e),i.proxy,c(i,p))})}function d(e,t,r,i,s){var a=o(e);l(t||"",r,function(t,r){u(e,t,r,i).forEach(function(t){delete n[a][t.i];e.removeEventListener(h(t.e),t.proxy,c(t,s))})})}function b(t){var n,r={originalEvent:t};for(n in t)!g.test(n)&&t[n]!==undefined&&(r[n]=t[n]);e.each(y,function(e,n){r[e]=function(){this[n]=v;return t[e].apply(t,arguments)};r[n]=m});return r}function w(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0;t.call(this)}}}var t=e.zepto.qsa,n={},r=1,i={},s={mouseenter:"mouseover",mouseleave:"mouseout"};i.click=i.mousedown=i.mouseup=i.mousemove="MouseEvents";e.event={add:p,remove:d};e.proxy=function(t,n){if(e.isFunction(t)){var r=function(){return t.apply(n,arguments)};r._zid=o(t);return r}if(typeof n=="string")return e.proxy(t[n],t);throw new TypeError("expected function")};e.fn.bind=function(e,t){return this.each(function(){p(this,e,t)})};e.fn.unbind=function(e,t){return this.each(function(){d(this,e,t)})};e.fn.one=function(e,t){return this.each(function(n,r){p(this,e,t,null,function(e,t){return function(){var n=e.apply(r,arguments);d(r,t,e);return n}})})};var v=function(){return!0},m=function(){return!1},g=/^([A-Z]|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,r){return this.each(function(i,s){p(s,n,r,t,function(n){return function(r){var i,o=e(r.target).closest(t,s).get(0);if(o){i=e.extend(b(r),{currentTarget:o,liveFired:s});return n.apply(o,[i].concat([].slice.call(arguments,1)))}}})})};e.fn.undelegate=function(e,t,n){return this.each(function(){d(this,t,n,e)})};e.fn.live=function(t,n){e(document.body).delegate(this.selector,t,n);return this};e.fn.die=function(t,n){e(document.body).undelegate(this.selector,t,n);return this};e.fn.on=function(t,n,r){return!n||e.isFunction(n)?this.bind(t,n||r):this.delegate(n,t,r)};e.fn.off=function(t,n,r){return!n||e.isFunction(n)?this.unbind(t,n||r):this.undelegate(n,t,r)};e.fn.trigger=function(t,n){if(typeof t=="string"||e.isPlainObject(t))t=e.Event(t);w(t);t.data=n;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})};e.fn.triggerHandler=function(t,n){var r,i;this.each(function(s,o){r=b(typeof t=="string"?e.Event(t):t);r.data=n;r.target=o;e.each(u(o,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})});return i};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}});["focus","blur"].forEach(function(t){e.fn[t]=function(e){e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}});return this}});e.Event=function(e,t){typeof e!="string"&&(t=e,e=t.type);var n=document.createEvent(i[e]||"Events"),r=!0;if(t)for(var s in t)s=="bubbles"?r=!!t[s]:n[s]=t[s];n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null);n.isDefaultPrevented=function(){return this.defaultPrevented};return n}})(Zepto);(function($){function triggerAndReturn(e,t,n){var r=$.Event(t);$(e).trigger(r,n);return!r.defaultPrevented}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t);triggerGlobal(n,r,"ajaxSuccess",[t,n,e]);ajaxComplete(i,t,n)}function ajaxError(e,t,n,r){var i=r.context;r.error.call(i,n,t,e);triggerGlobal(r,i,"ajaxError",[n,r,e]);ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e);triggerGlobal(n,r,"ajaxComplete",[t,n]);ajaxStop(n)}function empty(){}function mimeToDataType(e){e&&(e=e.split(";",2)[0]);return e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional));e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data))}function parseArguments(e,t,n,r){var i=!$.isFunction(t);return{url:e,data:i?t:undefined,success:i?$.isFunction(n)?n:undefined:t,dataType:i?r||n:n}}function serialize(e,t,n,r){var i,s=$.isArray(t);$.each(t,function(t,o){i=$.type(o);r&&(t=n?r:r+"["+(s?"":t)+"]");!r&&s?e.add(o.name,o.value):i=="array"||!n&&i=="object"?serialize(e,o,n,t):e.add(t,o)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0;$.ajaxJSONP=function(e){if("type"in e){var t="jsonp"+ ++jsonpID,n=document.createElement("script"),r=function(){clearTimeout(o);$(n).remove();delete window[t]},i=function(n){r();if(!n||n=="timeout")window[t]=empty;ajaxError(null,n||"abort",s,e)},s={abort:i},o;if(ajaxBeforeSend(s,e)===!1){i("abort");return!1}window[t]=function(t){r();ajaxSuccess(t,s,e)};n.onerror=function(){i("error")};n.src=e.url.replace(/=\?/,"="+t);$("head").append(n);e.timeout>0&&(o=setTimeout(function(){i("timeout")},e.timeout));return s}return $.ajax(e)};$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings);settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);settings.url||(settings.url=window.location.toString());serializeData(settings);settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+Date.now()));var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder){hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?"));return $.ajaxJSONP(settings)}var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest");if(mime){baseHeaders.Accept=mime;mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]);xhr.overrideMimeType&&xhr.overrideMimeType(mime)}if(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=$.extend(baseHeaders,settings.headers||{});xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type"));result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,xhr.status?"error":"abort",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);if(ajaxBeforeSend(xhr,settings)===!1){xhr.abort();return!1}settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty;xhr.abort();ajaxError(null,"timeout",xhr,settings)},settings.timeout));xhr.send(settings.data?settings.data:null);return xhr};$.get=function(e,t,n,r){return $.ajax(parseArguments.apply(null,arguments))};$.post=function(e,t,n,r){var i=parseArguments.apply(null,arguments);i.type="POST";return $.ajax(i)};$.getJSON=function(e,t,n){var r=parseArguments.apply(null,arguments);r.dataType="json";return $.ajax(r)};$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;i.length>1&&(o.url=i[0],s=i[1]);o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e);u&&u.apply(r,arguments)};$.ajax(o);return this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];n.add=function(e,t){this.push(escape(e)+"="+escape(t))};serialize(n,e,t);return n.join("&").replace(/%20/g,"+")}})(Zepto);(function(e){e.fn.serializeArray=function(){var t=[],n;e(Array.prototype.slice.call(this.get(0).elements)).each(function(){n=e(this);var r=n.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:n.attr("name"),value:n.val()})});return t};e.fn.serialize=function(){var e=[];this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))});return e.join("&")};e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n);n.defaultPrevented||this.get(0).submit()}return this}})(Zepto);(function(e,t){function y(e){return b(e.replace(/([a-z])([A-Z])/,"$1-$2"))}function b(e){return e.toLowerCase()}function w(e){return r?r+e:b(e)}var n="",r,i,s,o={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},u=window.document,a=u.createElement("div"),f=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l,c,h,p,d,v,m,g={};e.each(o,function(e,i){if(a.style[e+"TransitionProperty"]!==t){n="-"+b(e)+"-";r=i;return!1}});l=n+"transform";g[c=n+"transition-property"]=g[h=n+"transition-duration"]=g[p=n+"transition-timing-function"]=g[d=n+"animation-name"]=g[v=n+"animation-duration"]=g[m=n+"animation-timing-function"]="";e.fx={off:r===t&&a.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:w("TransitionEnd"),animationEnd:w("AnimationEnd")};e.fn.animate=function(t,n,r,i){e.isPlainObject(n)&&(r=n.easing,i=n.complete,n=n.duration);n&&(n=(typeof n=="number"?n:e.fx.speeds[n]||e.fx.speeds._default)/1e3);return this.anim(t,n,r,i)};e.fn.anim=function(n,r,i,s){var o,u={},a,b="",w=this,E,S=e.fx.transitionEnd;r===t&&(r=.4);e.fx.off&&(r=0);if(typeof n=="string"){u[d]=n;u[v]=r+"s";u[m]=i||"linear";S=e.fx.animationEnd}else{a=[];for(o in n)f.test(o)?b+=o+"("+n[o]+") ":(u[o]=n[o],a.push(y(o)));b&&(u[l]=b,a.push(l));if(r>0&&typeof n=="object"){u[c]=a.join(", ");u[h]=r+"s";u[p]=i||"linear"}}E=function(t){if(typeof t!="undefined"){if(t.target!==t.currentTarget)return;e(t.target).unbind(S,E)}e(this).css(g);s&&s.call(this)};r>0&&this.bind(S,E);this.size()&&this.get(0).clientLeft;this.css(u);r<=0&&setTimeout(function(){w.each(function(){E.call(this)})},0);return this};a=null})(Zepto);(function(e){function u(e){return"tagName"in e?e:e.parentNode}function a(e,t,n,r){var i=Math.abs(e-t),s=Math.abs(n-r);return i>=s?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function f(){o=null;if(t.last){t.el.trigger("longTap");t={}}}function l(){o&&clearTimeout(o);o=null}function c(){n&&clearTimeout(n);r&&clearTimeout(r);i&&clearTimeout(i);o&&clearTimeout(o);n=r=i=o=null;t={}}var t={},n,r,i,s=750,o;e(document).ready(function(){var h,p;e(document.body).bind("touchstart",function(r){h=Date.now();p=h-(t.last||h);t.el=e(u(r.touches[0].target));n&&clearTimeout(n);t.x1=r.touches[0].pageX;t.y1=r.touches[0].pageY;p>0&&p<=250&&(t.isDoubleTap=!0);t.last=h;o=setTimeout(f,s)}).bind("touchmove",function(e){l();t.x2=e.touches[0].pageX;t.y2=e.touches[0].pageY;Math.abs(t.x1-t.x2)>10&&e.preventDefault()}).bind("touchend",function(s){l();t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?i=setTimeout(function(){t.el.trigger("swipe");t.el.trigger("swipe"+a(t.x1,t.x2,t.y1,t.y2));t={}},0):"last"in t&&(r=setTimeout(function(){var r=e.Event("tap");r.cancelTouch=c;t.el.trigger(r);if(t.isDoubleTap){t.el.trigger("doubleTap");t={}}else n=setTimeout(function(){n=null;t.el.trigger("singleTap");t={}},250)},0))}).bind("touchcancel",c);e(window).bind("scroll",c)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})})(Zepto);var PreloadGraphics=function(){function t(){$("body").append('<div id="plg"></div>');for(var t=0;t<e.length;t++)$("#plg").append('<img src="images/'+e[t]+'">')}var e=["slider_bar_252.png","slider_button_61.png","checkmark_shadow.png","anchor_box_arrow_left.png","anchor_box_arrow_right.png","arrow_grey_back.png","arrow_blue_back.png","arrow_grey_next.png","arrow_blue_next.png","button_shareAlert_close.png","icon_share_arrow.png","ajax-loader.gif","MHT_logo.png","Sunnybrook_logo.png"],n=function(){t()};return{init:n}}(),Pages={login:'<header class="sb o0" style="display: none;">			<img src="images/Sunnybrook_logo.png" alt="Sunnybrook Health Sciences Centre" width="170" height="40">		</header>		<!-- end sb -->		<article class="login o0" style="display: none;">			<h1 class="title">Welcome to<br>				<strong><span>Mental Health</span> Telemetry</strong></h1>			<p class="alert o0" id="alert-userId" style="display: none;">You must provide a valid <strong>email address</strong>.</p>			<p class="alert o0" id="alert-password" style="display: none;"><strong>Password</strong> is a required field.</p>			<p class="alert o0" id="alert-wrongUserPassword" style="display: none;">Wrong <strong>email address</strong> or <strong>password</strong>.</p>			<p class="alert o0" id="alert-cantConnect" style="display: none;">Cannot connect to the MHT server. <strong>Please check your internet connection.</strong></p>			<p class="alert o0" id="alert-userNotEnabled" style="display: none;"><strong>User not enabled</strong></p>			<form id="login" action="#">				<fieldset>					<input type="email" name="userId" class="top" id="userId" placeholder="Email address" required="required" autocorrect="off" autocapitalize="off">					<input type="password" name="password" class="bottom" id="password" placeholder="Password" required="required">					<div class="fRight">						<input type="checkbox" name="remember" id="remember">						<label for="remember">Remember me</label>					</div>					<!-- end fRight -->					<input type="submit" name="btnLogin" id="btnLogin" value="Login">				</fieldset>			</form>			<p class="forgot"><a href="02_forgot.php" title="Forgot your password?" id="btnForgot">Forgot your password?</a></p>		</article>',sbHeader:'<header class="mht o0" style="display: none;">			<img src="images/MHT_logo.png" alt="MHT" width="80" height="27">		</header>',range:'<article class="o0" id="art-" style="display: none;">			<div class="qCont" id="qcIscroll-">				<div class="question">					<h1>Question <em id="cq-"></em> of <em id="tq-"></em></h1>					<p>Using the line below, please rate</p>					<p id="p-"></p>					<!-- <p>for the past <span id="days-"></span> <span id="dayDays-"></span>.</p> -->				</div>				<!-- end question -->			</div>			<!-- end qcIscroll -->			<form class="range">				<fieldset>					<input type="range" name="q-" id="q-" required>				</fieldset>				<!-- end range -->			</form>			<div class="markers">				<p class="range left" id="rl-">					<em></em>					<span>&nbsp;</span>				</p>				<p class="range right" id="rr-">					<em></em>					<span>&nbsp;</span>				</p>			</div>			<!-- end markers -->			<nav class="backNext">				<ul>					<li class="back"><a href="#" title="Back" class="active" id="back-"><span>Back</span></a></li>					<li class="next"><a href="#" title="Next" id="next-"><span>Next</span></a></li>				</ul>			</nav>			<!-- end backNext -->		</article>',mc4:'<article class="o0" id="art-" style="display: none;">			<div class="qCont">				<div class="question">					<p class="instruction">Please select the one response that best describes you for the past <span id="days-"></span> <span id="dayDays-"></span>.</p>					<h1>Question <em id="cq-"></em> of <em id="tq-"></em>						<span id="p-"></span></h1>					<form class="radioButtons">						<fieldset>							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--0" value=""></div>								<div class="label"><label for="a--0" id="label--0"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--1" value=""></div>								<div class="label"><label for="a--1" id="label--1"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--2" value=""></div>								<div class="label"><label for="a--2" id="label--2"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--3" value=""></div>								<div class="label"><label for="a--3" id="label--3"></label></div>							</div>							<!-- end row -->						</fieldset>					</form>					<!-- end radioButtons -->				</div>				<!-- end question -->			</div>			<!-- end qcIscroll -->			<nav class="backNext">				<ul>					<li class="back"><a href="#" title="Back" class="active" id="back-"><span>Back</span></a></li>					<li class="next"><a href="#" title="Next" id="next-"><span>Next</span></a></li>				</ul>			</nav>			<!-- end backNext -->		</article>',mc5:'<article class="o0" id="art-" style="display: none;">			<div class="qCont">				<div class="question">					<p class="instruction">Choose which statement best describes the way you have been feeling for the past <span id="days-"></span> <span id="dayDays-"></span>.</p>					<h1>Question <em id="cq-"></em> of <em id="tq-"></em>						<span id="p-"></span></h1>					<form class="radioButtons">						<fieldset>							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--0" value=""></div>								<div class="label"><label for="a--0" id="label--0"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--1" value=""></div>								<div class="label"><label for="a--1" id="label--1"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--2" value=""></div>								<div class="label"><label for="a--2" id="label--2"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--3" value=""></div>								<div class="label"><label for="a--3" id="label--3"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--4" value=""></div>								<div class="label"><label for="a--4" id="label--4"></label></div>							</div>							<!-- end row -->						</fieldset>					</form>					<!-- end radioButtons -->				</div>				<!-- end question -->			</div>			<!-- end qcIscroll -->			<nav class="backNext">				<ul>					<li class="back"><a href="#" title="Back" class="active" id="back-"><span>Back</span></a></li>					<li class="next"><a href="#" title="Next" id="next-"><span>Next</span></a></li>				</ul>			</nav>			<!-- end backNext -->		</article>',other:'<article class="o0" id="art-" style="display: none;">			<div class="qCont">				<div class="question">					<h1>Question <em id="cq-"></em> of <em id="tq-"></em></h1>					<p>Please indicate</p>					<p><span id="p-"></span> in the last <span id="days-"></span> <span id="dayDays-"></span>?</p>					<form class="radioButtons">						<fieldset>							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--0" value=""></div>								<div class="label"><label for="a--0" id="label--0"></label></div>							</div>							<!-- end row -->							<div class="row">								<div class="radioCheck"><input type="radio" name="a-" id="a--1" value=""></div>								<div class="label"><label for="a--1" id="label--1"></label></div>							</div>							<!-- end row -->						</fieldset>					</form>					<!-- end radioButtons -->				</div>				<!-- end question -->			</div>			<!-- end qcIscroll -->			<nav class="backNext">				<ul>					<li class="back"><a href="#" title="Back" class="active" id="back-"><span>Back</span></a></li>					<li class="next"><a href="#" title="Next" id="next-"><span>Next</span></a></li>				</ul>			</nav>			<!-- end backNext -->		</article>'
,comment:'<article class="o0" id="art-" style="display: none;">			<form id="comment" action="#" class="textarea">				<fieldset>					<textarea name="comments" id="comments" placeholder="Comments?" rows="5"></textarea>				</fieldset>			</form>			<!-- end textarea -->			<nav class="backNext">				<ul>					<li class="back"><a href="#" title="Back" class="active" id="back-"><span>Back</span></a></li>					<li class="next"><a href="#" title="Next" id="next-"><span>Next</span></a></li>				</ul>			</nav>			<!-- end backNext -->		</article>',submit:'<article class="message o0" id="art-" style="display: none;">			<div id="middle">				<p>Thanks for responding.<br>					Please <a href="#" title="Submit your questionnaire" class="btnSubmit">submit</a> your questionnaire to complete this session.</p>					<button class="btnSubmit">Submit</button>			</div>			<!-- end middle -->			<div class="bbWrap">				<a id="back-" class="backBtn active" title="Back" href="#">					<span>Back</span>				</a>				<!-- end active -->			</div>			<!-- end bbWrap -->		</article>',noConnection:'<article class="message o0" id="art-nc" style="display: none;">			<div id="middle">				<h2>There was a problem</h2>				<p>and your questionnaire didn\'t submit. Your answers to this questionnaire will submit automatically the next time you successfully log in.</p>			</div>			<!-- end middle -->		</article>',noQuestions:'<article class="message o0" id="art-nq" style="display: none;">			<div id="middle">				<h2>Questionnaire Missing</h2>				<p>Contact your doctor.</p>			</div>			<!-- end middle -->		</article>',thanks:'<article class="o0" id="art-thanks" style="display: none;">			<div id="middle">				<h2>Thank you.</h2>			</div>			<!-- end middle -->		</article>',forgot:'<article class="o0" id="art-forgot" style="display: none;">			<h1 class="plain">Forgot your password?</h1>			<p>Enter your email address to help us locate your account information. You may need to check your spam folder or unblock<br>				<strong>no-reply@sunnybrook.ca</strong>.</p>			<p class="alert o0" id="alert-email" style="display: none;"><strong>Email address</strong> is a required field.</p>			<p class="alert o0" id="alert-wrongUser" style="display: none;">Wrong <strong>email address</strong></p>			<p class="alert o0" id="alert-cantConnect" style="display: none;">Cannot connect to the MHT server. <strong>Please check your internet connection.</strong></p>			<p class="alert o0" id="alert-userNotEnabled" style="display: none;"><strong>User not enabled</strong></p>			<form id="forgot" action="#">				<fieldset>					<input type="email" name="email" id="email" placeholder="Email address" required autocapitalize="off" autocorrect="off">					<input type="submit" name="btnSubmit" id="btnSubFgPw" value="Submit">				</fieldset>			</form>		</article>',fgThanks:'<article class="o0" id="art-fgThanks" style="display: none;">			<div id="middle">				<h2>You will recieve an email<br>					shortly containing<br>					directions on how to<br>					reset your account\'s<br>					password.</h2>			</div>			<!-- end middle -->		</article>',resetLogin:'<article class="login o0" id="art-resetLogin" style="display: none;">			<h1 class="plain">Your password has been successfully changed.</h1>			<p>Please provide your updated information below to log into <strong>Mental Health Telemetry</strong>:</p>			<p class="alert o0" id="alert-userId" style="display: none;">You must provide a valid <strong>email address</strong>.</p>			<p class="alert o0" id="alert-password" style="display: none;"><strong>Password</strong> is a required field.</p>			<p class="alert o0" id="alert-wrongUserPassword" style="display: none;">Wrong <strong>email address</strong> or <strong>password</strong>.</p>			<p class="alert o0" id="alert-cantConnect" style="display: none;">Cannot connect to the MHT server. <strong>Please check your internet connection.</strong></p>			<p class="alert o0" id="alert-userNotEnabled" style="display: none;"><strong>User not enabled</strong></p>			<form id="login" action="#">				<fieldset>					<input type="email" name="userId" class="top" id="userId" placeholder="Email address" required="required" autocorrect="off" autocapitalize="off">					<input type="password" name="password" class="bottom" id="password" placeholder="Password" required="required">					<div class="fRight">						<input type="checkbox" name="remember" id="remember">						<label for="remember">Remember me</label>					</div>					<!-- end fRight -->					<input type="submit" name="btnLogin" id="btnLogin" value="Login">				</fieldset>			</form>			<p class="forgot"><a href="02_forgot.php" title="Forgot your password?" id="btnForgot">Forgot your password?</a></p>		</article>		<!-- end login -->		<div class="shareAlert o0" id="sa">			<a href="#" class="img" id="btnCloseShare"><span>Close</span></a>			<p>To install this Web site on your device as an app., please tap the <strong>Share</strong> button below and select <strong>	Add to Home Screen</strong>.</p>			<a href="#" id="ds">Don\'t show this message again.</a>			<div>&nbsp;</div>		</div>',loading:'<article class="o0" id="art-loading" style="display: none;">			<div id="middle">				<img src="images/ajax-loader.gif" alt="Loading" width="16" height="16">			</div>			<!-- end middle -->		</article>'},Mc=function(){function e(e){$("#art-"+e+' form.radioButtons fieldset input[type="radio"]').each(function(){var t=$(this);if(t.val()==results.answers[e].answer){t.attr("checked","checked");Quiz.next(e)}t.click(function(){results.answers[e]||results.answers.push({id:null,answer:null});results.answers[e].id=questionnaire.questions[e].questionID;results.answers[e].answer=t.val();$("#next-"+e).hasClass("active")||Quiz.next(e)})})}var t=function(t){e(t)};return{init:t}}(),Range=function(){function e(e){var t=Math.round(parseInt($("#g-"+e).css("left").split("px")[0])/2.52);questionnaire.questions[parseInt(e.split("-")[1])].flipped==1&&(t=100-t);$("#"+e).val(t)}function t(e){e<=5?e=1:e>=247&&(e=251);return e}function n(e,t,n){var r=e.offset(),i;if(n){var s=t.touches.item(0);i=s.clientX-r.left}else i=t.pageX-r.left;return i}function r(r){!$("html").hasClass("bbNoTouch")&&!$("html").hasClass("desktop")?$("#"+r).on("touchstart",function(e){e.preventDefault()}).on("touchmove",function(e){var r=$(this).parent(),i=n(r,e,!0);if(i>=0&&i<=r.width()){i=t(i);$(this).css("left",i+"px")}}).on("touchend",function(){e(r.split("g-")[1])}):$("#rb-"+r.split("g-")[1]).on("click",function(i){var s=n($(this),i,!1);if(s>=0&&s<=$(this).width()){s=t(s);$("#g-"+r.split("g-")[1]).css("left",s+"px");e(r.split("g-")[1])}})}function i(i,s){!$("html").hasClass("bbNoTouch")&&!$("html").hasClass("desktop")?$("#nv-"+s).on("touchstart",function(i){results.answers[s]||results.answers.push({id:null,answer:null,flipped:null});var o=n($(this),i,!0);o>=0&&o<=$("#rb-"+s).width()&&(o=t(o));$(this).remove();$("#g-"+s).css({left:o+"px"});e(s);r("g-"+s);$("#g-"+s).attr("class","grip op1");setTimeout(function(){var e=parseInt(s.split("-")[1]);Quiz.next(e)},1e3)}):$("#nv-"+s).on("click",function(i){results.answers[s]||results.answers.push({id:null,answer:null,flipped:null});var o=n($(this),i,!1);o>=0&&o<=$("#rb-"+s).width()&&(o=t(o));$(this).remove();$("#g-"+s).css({left:o+"px"});e(s);r("g-"+s);$("#g-"+s).attr("class","grip op1");setTimeout(function(){var e=parseInt(s.split("-")[1]);Quiz.next(e)},1e3)})}function s(e){$("#art-"+e+' form.range fieldset input[type="range"]').each(function(){var t=$(this).attr("id");$(this).hide();if(!results.answers[e]){$(this).after('<div class="rangeBar" id="rb-'+t+'">					<div class="whiteEdgeRight">&nbsp;</div>					<div class="grip op0" id="g-'+t+'" style="left: '+Math.round($(this).val()*2.52)+'px;">&nbsp;</div>				</div>				<div class="noVal" id="nv-'+t+'">&nbsp;</div>');i(e,t)}else{$(this).val(results.answers[e].answer);var n=questionnaire.questions[e].flipped==1?100-results.answers[e].answer:results.answers[e].answer,s=n*2.52;s==252&&(s=251);$(this).after('<div class="rangeBar" id="rb-'+t+'">					<div class="grip op1" id="g-'+t+'" style="left: '+s+'px;">&nbsp;</div>				</div>');r("g-"+t);Quiz.next(e)}})}var o=function(e){s(e)};return{init:o}}(),Middle=function(){function e(){$("article.login").css("height","auto")}function n(){var e=$(window).height(),t=$("header").height();t==null&&(t=0);var n=$("#middle").height(),r=Math.round((e-n)/2)-40;$("article.login, article.message, div.message, #art-loading, #art-thanks, #art-forgot, #art-fgThanks, #art-nc, #art-nq").css("height",e-t-40+"px");$("#middle").css("margin-top",0-Math.round(n/2)+"px")}var t=function(){e();$(window).on("orientationchange",function(){e()})},r=function(){n();$(window).on("orientationchange",function(){n()});$(window).resize(function(){n()})};return{destroyMiddle:t,init:r}}(),Quiz=function(){var e=!1,t=function(e){return e%2==1},n=function(t){$("#back-"+t).click(function(){if($(this).hasClass("active")&&e==0){e=!0;if($("#art-"+t+" form").hasClass("range")&&results.answers[t]){results.answers[t].id=questionnaire.questions[t].questionID;results.answers[t].answer=$("#q-"+t).val();results.answers[t].flipped=questionnaire.questions[t].flipped}if($("#art-"+t+" form").hasClass("textarea")){results.answers[t]||results.answers.push({id:null,answer:null});results.answers[t].id="comments";results.answers[t].answer=$("#comments").val()}if($("html").hasClass("blackberry")){$("#art-"+t).remove();currQuest=prevQuest;currQuest>0?prevQuest=currQuest-1:prevQuest=null;currQuest<lastQuest?nextQuest=currQuest+1:nextQuest=null;l(currQuest);e=!1;window.scrollTo(0,1)}else{$("#art-"+t).removeClass("o1").addClass("o0");setTimeout(function(){$("#art-"+t).remove();currQuest=prevQuest;currQuest>0?prevQuest=currQuest-1:prevQuest=null;currQuest<lastQuest?nextQuest=currQuest+1:nextQuest=null;l(currQuest);e=!1;window.scrollTo(0,1)},250)}}return!1})},r=function(t){$("#next-"+t).addClass("active").click(function(){if($(this).hasClass("active")&&e==0){e=!0;if($("#art-"+t+" form").hasClass("range")&&results.answers[t]){results.answers[t].id=questionnaire.questions[t].questionID;results.answers[t].answer=$("#q-"+t).val();results.answers[t].flipped=questionnaire.questions[t].flipped}if($("#art-"+t+" form").hasClass("textarea")){results.answers[t]||results.answers.push({id:"comments",answer:null});results.answers[t].id="comments";results.answers[t].answer=$("#comments").val()}if($("html").hasClass("blackberry")){$("#art-"+t).remove();currQuest=nextQuest;currQuest>0?prevQuest=currQuest-1:prevQuest=null;currQuest<lastQuest?nextQuest=currQuest+1:nextQuest=null;l(currQuest);window.scrollTo(0,1);e=!1}else{$("#art-"+t).removeClass("o1").addClass("o0");setTimeout(function(){$("#art-"+t).remove();currQuest=nextQuest;currQuest>0?prevQuest=currQuest-1:prevQuest=null;currQuest<lastQuest?nextQuest=currQuest+1:nextQuest=null;l(currQuest);window.scrollTo(0,1);e=!1},250)}}return!1})},i=function(e){$("#art-").attr("id","art-"+e);$("#back-").attr("id","back-"+e);n(e);$("#art-"+e+" .btnSubmit").click(function(){results.date=new Date;var t=JSON.stringify(results);localStorage.setItem("lsResults",t);$("#art-"+e).removeClass("o1").addClass("o0");setTimeout(function(){$("#art-"+e).remove();$("header.mht").after(Pages.loading);$("#art-loading").show().attr("class","o1");Middle.init();$.ajax({type:"POST",url:"php/submit.php",data:{results:t},success:function(e){localStorage.removeItem("lsResults");$("#art-loading").attr("class","o0");setTimeout(function(){$("#art-loading").remove();$("header.mht").after(Pages.thanks);$("#art-thanks").show().attr("class","o1");Middle.init()},250)},error:function(){$("#art-loading").attr("class","o0");$("header.mht").after(Pages.noConnection);$("#art-nc").show().attr("class","o1")}})},250);return!1});if(loggedIn==0){$("html").hasClass("blackberry")?$("header.mht").attr("class","mht o1").show():$("header.mht").show().removeClass("o0").addClass("o1");loggedIn=!0}$("html").hasClass("blackberry")?$("#art-"+e).attr("class","message o1").show():$("#art-"+e).show().removeClass("o0").addClass("o1");Middle.init()},s=function(e,t){$("#art-").attr("id","art-"+e);$("#back-").attr("id","back-"+e);$("#next-").attr("id","next-"+e);n(e);r(e);if(loggedIn==0){$("html").hasClass("blackberry")?$("header.mht").attr("class","mht o1").show():$("header.mht").show().removeClass("o0").addClass("o1");loggedIn=!0}$("html").hasClass("blackberry")?$("#art-"+e).attr("class","o1").show():$("#art-"+e).show().removeClass("o0").addClass("o1");results.answers[e]||results.answers.push({id:"comment",answer:""});results.answers[e].answer!=""&&$("#comments").val(results.answers[e].answer)},o=function(e){$("#art-").attr("id","art-"+e);$("#days-").attr("id","days-"+e);$("#dayDays-").attr("id","dayDays-"+e);$("#cq-").attr("id","cq-"+e);$("#tq-").attr("id","tq-"+e);$("#p-").attr("id","p-"+e);$("#a--0").attr("name","a-"+e).attr("id","a-"+e+"-0").attr("value","Anchor_0");$("#label--0").attr("for","a-"+e+"-0").attr("id","label-"+e+"-0").html(questionnaire.questions[e].anchors[0]);$("#a--1").attr("name","a-"+e).attr("id","a-"+e+"-1").attr("value","Anchor_1");$("#label--1").attr("for","a-"+e+"-1").attr("id","label-"+e+"-1").html(questionnaire.questions[e].anchors[1]);$("#back-").attr("id","back-"+e);$("#next-").attr("id","next-"+e);if(questionnaire.questions[e].days>1){$("#days-"+e).html(questionnaire.questions[e].days);$("#dayDays-"+e).html("days")}else $("#dayDays-"+e).html("day");$("#cq-"+e).html(e+1);$("#tq-"+e).html(lastQuest+1-2);$("#p-"+e).html(questionnaire.questions[e].stem);e==0?$("#back-"+e).remove():n(e);$("#next-"+e).click(function(){return!1});if(loggedIn==0){$("html").hasClass("blackberry")?$("header.mht").attr("class","mht o1").show():$("header.mht").show().removeClass("o0").addClass("o1");loggedIn=!0}$("html").hasClass("blackberry")?$("#art-"+e).attr("class","o1").show():$("#art-"+e).show().removeClass("o0").addClass("o1");results.answers[e]||results.answers.push({id:null,answer:null});Mc.init(e)},u=function(e){$("#art-").attr("id","art-"+e);$("#days-").attr("id","days-"+e);$("#dayDays-").attr("id","dayDays-"+e);$("#cq-").attr("id","cq-"+e);$("#tq-").attr("id","tq-"+e);$("#p-").attr("id","p-"+e);$("#a--0").attr("name","a-"+e).attr("id","a-"+e+"-0").attr("value","Anchor_0");$("#label--0").attr("for","a-"+e+"-0").attr("id","label-"+e+"-0").html(questionnaire.questions[e].anchors[0]);$("#a--1").attr("name","a-"+e).attr("id","a-"+e+"-1").attr("value","Anchor_1");$("#label--1").attr("for","a-"+e+"-1").attr("id","label-"+e+"-1").html(questionnaire.questions[e].anchors[1]);$("#a--3").attr("name","a-"+e).attr("id","a-"+e+"-3").attr("value","Anchor_3");$("#label--3").attr("for","a-"+e+"-3").attr("id","label-"+e+"-3").html(questionnaire.questions[e].anchors[3]);$("#a--4").attr("name","a-"+e).attr("id","a-"+e+"-4").attr("value","Anchor_4");$("#label--4").attr("for","a-"+e+"-4").attr("id","label-"+e+"-4").html(questionnaire.questions[e].anchors[4]);$("#a--2").attr("name","a-"+e).attr("id","a-"+e+"-2").attr("value","Anchor_2");$("#label--2").attr("for","a-"+e+"-2").attr("id","label-"+e+"-2").html(questionnaire.questions[e].anchors[2]);$("#back-").attr("id","back-"+e);$("#next-").attr("id","next-"+e);if(questionnaire.questions[e].days>1){$("#days-"+e).html(questionnaire.questions[e].days);$("#dayDays-"+e).html("days")}else $("#dayDays-"+e).html("day");$("#cq-"+e).html(e+1);$("#tq-"+e).html(lastQuest+1-2);$("#p-"+e).html(questionnaire.questions[e].stem);e==0?$("#back-"+e).remove():n(e);$("#next-"+e).click(function(){return!1});if(loggedIn==0){$("html").hasClass("blackberry")?$("header.mht").attr("class","mht o1").show():$("header.mht").show().removeClass("o0").addClass("o1");loggedIn=!0}$("html").hasClass("blackberry")?$("#art-"+e).attr("class","o1").show():$("#art-"+e).show().removeClass("o0").addClass("o1");results.answers[e]||results.answers.push({id:null,answer:null});Mc.init(e)},a=function(e){$("#art-").attr("id","art-"+e);$("#days-").attr("id","days-"+e);$("#dayDays-").attr("id","dayDays-"+e);$("#cq-").attr("id","cq-"+e);$("#tq-").attr("id","tq-"+e);$("#p-").attr("id","p-"+e);$("#a--0").attr("name","a-"+e).attr("id","a-"+e+"-0").attr("value","Anchor_0");$("#label--0").attr("for","a-"+e+"-0").attr("id","label-"+e+"-0").html(questionnaire.questions[e].anchors[0]);$("#a--1").attr("name","a-"+e).attr("id","a-"+e+"-1").attr("value","Anchor_1");$("#label--1").attr("for","a-"+e+"-1").attr("id","label-"+e+"-1").html(questionnaire.questions[e].anchors[1]);$("#a--2").attr("name","a-"+e).attr("id","a-"+e+"-2").attr("value","Anchor_2");$("#label--2").attr("for","a-"+e+"-2").attr("id","label-"+e+"-2").html(questionnaire.questions[e].anchors[2]);$("#a--3").attr("name","a-"+e).attr("id","a-"+e+"-3").attr("value","Anchor_3");$("#label--3").attr("for","a-"+e+"-3").attr("id","label-"+e+"-3").html(questionnaire.questions[e].anchors[3]);$("#back-").attr("id","back-"+e);$("#next-").attr("id","next-"+e);if(questionnaire.questions[e].days>1){$("#days-"+e).html(questionnaire.questions[e].days);$("#dayDays-"+e).html("days")}else $("#dayDays-"+e).html("day");$("#cq-"+e).html(e+1);$("#tq-"+e).html(lastQuest+1-2);$("#p-"+e).html(questionnaire.questions[e].stem);e==0?$("#back-"+e).remove():n(e);$("#next-"+e).click(function(){return!1});if(loggedIn==0){$("html").hasClass("blackberry")?$("header.mht").attr("class","mht o1").show():$("header.mht").show().removeClass("o0").addClass("o1");loggedIn=!0}$("html").hasClass("blackberry")?$("#art-"+e).attr("class","o1").show():$("#art-"+e).show().removeClass("o0").addClass("o1");results.answers[e]||results.answers.push({id:null,answer:null});Mc.init(e)},f=function(e){$("#art-").attr("id","art-"+e);$("#days-").attr("id","days-"+e);$("#dayDays-").attr("id","dayDays-"+e);$("#qcIscroll-").attr("id","qcIscroll-"+e);$("#cq-").attr("id","cq-"+e);$("#tq-").attr("id","tq-"+e);$("#p-").attr("id","p-"+e);$("#q-").attr("name","q-"+e).attr("id","q-"+e);$("#rl-").attr("id","rl-"+e);$("#rr-").attr("id","rr-"+e);$("#back-").attr("id","back-"+e);$("#next-").attr("id","next-"+e);$("#cq-"+e).html(e+1);$("#tq-"+e).html(lastQuest+1-2);$("#p-"+e).html(questionnaire.questions[e].stem);$("#rl-"+e+" em").html(questionnaire.questions[e].anchors[0]);$("#rr-"+e+" em").html(questionnaire.questions[e].anchors[1]);e==0?$("#back-"+e).remove():n(e);e<=lastQuest?$("#next-"+e).click(function(){return!1}):r(e);if(loggedIn==0){$("html").hasClass("blackberry")?$("header.mht").attr("class","mht o1").show():$("header.mht").show().removeClass("o0").addClass("o1");loggedIn=!0}$("html").hasClass("blackberry")?$("#art-"+e).attr("class","o1").show():$("#art-"+e).show().removeClass("o0").addClass("o1");var t=new iScroll("qcIscroll-"+e,{vScrollbar:!1});Range.init(e)},l=function(e){var t=questionnaire.questions[e].questionID;if(t=="comment"){$("header.mht").after(Pages.comment);s(e)}else if(t=="submit"){$("header.mht").after(Pages.submit);i(e)}else{var n=t.split("_")[0];if(n=="VAS"){$("header.mht").after(Pages.range);f(e)}else if(n=="QIDS"){$("header.mht").after(Pages.mc4);a(e)}else if(n=="ASRM"){$("header.mht").after(Pages.mc5);u(e)}else{$("header.mht").after(Pages.other);o(e)}}},c=function(){l(currQuest)};return{isOdd:t,back:n,next:r,vas:f,typeArt:l,init:c}}(),Login=function(){function e(e){var t=e.length;if(t==0)return!1;while(--t){var n=Math.floor(Math.random()*(t+1)),r=e[t],i=e[n];e[t]=i;e[n]=r}return e}function t(){uname!=""&&$("#userId").val(uname);pword!=""&&$("#password").val(pword);uname!=""&&pword!=""?$("#remember").prop("checked",!0):$("#remember").prop("checked",!1)}function i(e){$("#art-loading").removeClass("o1").addClass("o0");setTimeout(function(){$("#art-loading").remove();$("body").prepend(Pages.login);$("header, article").show().removeClass("o0").addClass("o1");Middle.destroyMiddle();r();n(e)},250)}function o(e){$("header, article").removeClass("o1").addClass("o0");$("#sa").hasClass("o1")&&$("#sa").removeClass("o1").addClass("o0");setTimeout(function(){$("header, article, #sa").remove();$("body").prepend(Pages.loading);$("#art-loading").show().attr("class","o1");Middle.init();$.ajax({type:"POST",url:"php/login.php",data:e,dataType:"json",success:function(e){e.result===1?s(e):e.result===0?i("cantConnect"):e.result===2?i("wrongUserPassword"):e.result===3?i("wrongUserPassword"):e.result===4?i("userNotEnabled"):i("cantConnect")},error:function(){i("cantConnect")}})},250)}function u(e,t,r){var i=!0,s=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if(!s.test(e)){n("userId");i=!1}if(t==0){n("password");i=!1}if(i==0)return!1;var u={userId:e,password:t,remember:r};o(u)}var n=function(e){$("#alert-"+e).show().attr("class","alert o1");$("#"+e).removeClass("tiWhite").addClass("tiAlert");e=="dontMatch"?$("#Password, #confirmPassword").animate({"background-color":"#ffecec"},250,"ease-out"):e=="wrongUserPassword"?$("#userId, #password").animate({"background-color":"#ffecec"},250,"ease-out"):e!="cantConnect"&&e!="userNotEnabled"&&$("#"+e).animate({"background-color":"#ffecec"},250,"ease-out");setTimeout(function(){$("#alert-"+e).attr("class","alert o0")},3e3);setTimeout(function(){$("#alert-"+e).hide()},3500)},r=function(){Login.init();Forgot.init();t()},s=function(t){localStorage.getItem("lsResults")&&$.ajax({type:"POST",url:"php/submit.php",data:{results:localStorage.getItem("lsResults")}});questionnaire=t;if(questionnaire.questions.length<1){$("#art-loading").removeClass("o1").addClass("o0");setTimeout(function(){$("#art-loading").remove();$("body").prepend(Pages.sbHeader);$("header.mht").css({height:"46px"});$("header.mht img").css({margin:"-13px 0px 0px -40px",position:"absolute",left:"50%",top:"50%"});$("header.mht").show().removeClass("o0").addClass("o1");$("header.mht").after(Pages.noQuestions);$("#art-nq").show().attr("class","o1");Middle.init()},250)}else{results.patientID=questionnaire.patientID;results.sessionID=questionnaire.sessionID;questionnaire.randomize==1&&(questionnaire.questions=e(questionnaire.questions));questionnaire.flip==1&&$.each(questionnaire.questions,function(e,t){var n=t.questionID.split("_")[0];if(n=="vas"){t.flipped=null;t.flipped=Math.round(Math.random());t.flipped==1&&t.anchors.reverse()}});questionnaire.questions.push({questionID:"comment"},{questionID:"submit"});currQuest=0;nextQuest=1;lastQuest=questionnaire.questions.length-1;$("#art-loading").removeClass("o1").addClass("o0");setTimeout(function(){$("#art-loading").remove();$("body").prepend(Pages.sbHeader);$("header.mht").css({height:"46px"});$("header.mht img").css({margin:"-13px 0px 0px -40px",position:"absolute",left:"50%",top:"50%"});Quiz.init()},250)}},a=function(){$("#btnLogin").click(function(){$("#login input.top, #login input.bottom").css("background-color","#fff");var e=$("#userId").val(),t=$("#password").val(),n=$("#remember").is(":checked");u(e,t,n);return!1})};return{showAlerts:n,loginFields:r,loginSuccess:s,init:a}}(),Resize=function(){var e=function(){var e=0;$("article").each(function(){$(this).height()>e&&(e=$(this).height())});return e+6},t=function(){width=$(window).width();height=e();pos2=width;pos3=width*2;$("#acWrap").width(width).height(height);$("#ac").width(width*3);$("#ac").css("left",0-width+"px");$("#ac article").width(width-40);$("#ac article.pos1").css("left",pos1+"px");$("#ac article.pos2").css("left",pos2+"px");$("#ac article.pos3").css("left",pos3+"px")},n=function(){$(window).on("orientationchange",function(){})};return{setHeight:e,setSizes:t,init:n}}(),Forgot=function(){function e(e){$("#art-loading").removeClass("o1").addClass("o0");setTimeout(function(){$("#art-loading").remove();$("body").append(Pages.forgot);$("header, article").show().removeClass("o0").addClass("o1");Middle.init();Login.loginFields();Login.showAlerts(e);i()},250)}function t(e){$("#art-loading").removeClass("o1").addClass("o0");setTimeout(function(){$("#art-loading").remove();$("header.sb").after(Pages.fgThanks);$("#art-fgThanks").show().attr("class","o1");Middle.init()},250)}function n(n){$("#art-forgot").removeClass("o1").addClass("o0");setTimeout(function(){$("#art-forgot").remove();$("header.sb").after(Pages.loading);$("#art-loading").show().attr("class","o1");Middle.init();$.ajax({type:"POST",url:"php/email_password.php",data:n,dataType:"json",success:function(n){n.result===1?t(n):n.result===0?e("cantConnect"):n.result===2?e("wrongUser"):n.result===3?e("wrongUser"):n.result===4?e("userNotEnabled"):e("cantConnect")},error:function(){e("cantConnect")}})},250)}function r(e){var t=!0,r=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if(!r.test(e)){Login.showAlerts("email");t=!1}if(t==0)return!1;var i={Email:e};n(i)}function i(){$("#btnSubFgPw").click(function(){$("#email").css("background-color","#fff");var e=$("#email").val();r(e);return!1})}function s(){$("#btnForgot").click(function(){if($("html").hasClass("blackberry")){$("article.login").remove();$("header.sb").after(Pages.forgot);$("#art-forgot").attr("class","o1").show();i()}else{$("article.login").removeClass("o1").addClass("o0");setTimeout(function(){$("article.login").remove();$("header.sb").after(Pages.forgot);$("#art-forgot").show().attr("class","o1");i()},250)}return!1})}var o=function(){s()};return{init:o}}(),ShareAlert=function(){function e(){$("#sa").removeClass("o1").addClass("o0");setTimeout(function(){$("#sa").remove()},250)}function t(){$("#ds").on("click",function(){window.localStorage.setItem("dontShowSa",!0);e();return!1})}function n(){$("#btnCloseShare").on("click",function(){e();return!1})}function r(){if($("html").hasClass("ios")&&!window.navigator.standalone&&window.localStorage.getItem("dontShowSa")===null){$("#sa").show().removeClass("o0").addClass("o1");n();t()}}var i=function(){r()};return{init:i}}();